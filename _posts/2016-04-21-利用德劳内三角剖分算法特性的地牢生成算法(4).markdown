---
layout: post
title: "利用德劳内三角剖分算法特性的地牢生成算法(4)"
excerpt: ""
categories: [Unity,Delaunay]
comments: true
---
今天的任务是解决昨天没有解决的问题，并且看有没有时间完成这个三角拆分算法。

从测试中是可以看出来，现在的算法在计算两向量之间的夹角时区分不出180度~360度与0~180度的角度。要怎么样才能在0~360度的范围内都够计算呢。并且从Debug中发现，原先的算法，会导致找到重复的边。

![](http://imglf2.ph.126.net/P-T81nwHNrB-inlDHwTirg==/6598259438299176794.png)

改进之后分为两步：

先计算出下半环的边沿，再计算上半环。这样就可以找到点集的凸包了。

![](http://imglf0.ph.126.net/hDgeoYYFFO7NLnBZmrs5BQ==/6598129695927100194.png)

然后下一步就是在凸包内部找出可以用的三角形

目前思路是遍历所有的边，然后找目前边的左边的点，这个点与目前边成一个三角形，假如这个三角形符合德劳内三角剖分的要求就将该点与该边生成的三角形保存下来，并且保存下新生成的两天边。

![](http://imglf0.ph.126.net/XaZzaGvyKrFq8QfwGOC-0g==/6598101108624776832.png)

现在算法完成了一半，目前效果有点不正常，有时候可以找到正确的三角形，有时候却不行。不过还是要等完整代码生成的效果才知道这个算法是否可行。
## 正确三角形

![正确三角形](http://imglf2.ph.126.net/qwL6QBBE10HZ0aD1MMmoKw==/1157988054288764369.png)

## 错误三角形

![错误三角形](http://imglf2.ph.126.net/20VQonKfEvDkBOWx2wWZcw==/4888657395611522285.png)

今天多嘴两句，明天周五。有一种松一口气的感觉，但是又觉得不应该这样。 在写这个算法的过程中，发现自己遗忘了很多高中知识。 而且，更多是的发现自己还有很多东西不知道。看代码的时候也有点沉不下心，想快点看完，但是看的太快又不能理解透彻代码的思路。 要说原因，估计还是因为自己太浮躁了。 感觉有很多大神说的，想成为一个优秀的程序员要像一个苦行僧一样。 估计就是要沉得下气，能忍受自己无知带给自己的痛苦，并且在这种折磨中慢慢前行，把这种“痛苦”当作一种精神上的享受。挑战那些对于自己目前能力而言高难度的东西总会有成功的快感不是么。 虽然说是痛并快乐着 。但是，承载着这份痛，并且不断的变强，难道感觉非常愉悦么。嘛，但是自己也不是想成为一个单纯的程序员。
